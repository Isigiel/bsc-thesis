# Matrix multiply

Testing project can be found in the `code` folder.

## Code in test function
```cpp
uint32_t run(uint32_t n) {
    uint32_t a[n][n], b[n][n], mul[n][n];

    for (uint32_t i = 0; i < sizeof(a) / sizeof(a[0]); ++i) {
        for (uint32_t j = 0; j < sizeof(a[0]) / sizeof(a[0][0]); ++j) {
            a[i][j]=i+1;
            b[i][j]=i+2;
        }
    }

    for (uint32_t i = 0; i < sizeof(a) / sizeof(a[0]); ++i) {
        for (uint32_t j = 0; j < sizeof(a[0]) / sizeof(a[0][0]); ++j) {
            mul[i][j] = 0;
            for (uint32_t k = 0; k < sizeof(a[0]) / sizeof(a[0][0]); ++k) {
                mul[i][j] += a[i][k] * b[k][j];
            }
        }
    }
    return mul[n-1][n-1];
}
```
Creates two matrixes and multiplies them. The return is meant to prevent optimizations.

## Results
Following are the average runtimes of on call in microseconds

`Wasm3 v0.4.6 on ESP32, build Feb 17 2020 15:36:03`   
`Setup time: 1649`
|Run|WASM|NATIVE|
|---|---|---|
|1|26283|285|
|2|26277|281|
|3|26277|282|
|4|26277|281|
|5|26277|281|
|6|26277|282|
|7|26277|281|
|8|26277|281|
|9|26277|281|
|10|26277|282|
|11|26277|281|
|12|26277|281|
|13|26277|282|
|14|26277|281|
|15|26277|281|
|16|26277|281|
|17|26277|282|
|18|26277|281|
|19|26277|281|
|20|26277|282|
|21|26277|281|
|22|26277|281|
|23|26277|281|
|24|26277|282|
|25|26277|281|
|26|26277|281|
|27|26277|282|
|28|26277|281|
|29|26277|281|
|30|26277|281|
|31|26277|282|
|32|26277|281|
|33|26277|281|
|34|26277|282|
|35|26277|281|
|36|26277|281|
|37|26277|281|
|38|26277|282|
|39|26277|281|
|40|26277|281|
|41|26277|281|
|42|26277|282|
|43|26277|281|
|44|26277|281|
|45|26277|282|
|46|26277|281|
|47|26277|281|
|48|26277|281|
|49|26277|282|
|50|26277|281|
|51|26277|281|
|52|26277|282|
|53|26277|281|
|54|26277|281|
|55|26277|281|
|56|26277|282|
|57|26277|281|
|58|26277|281|
|59|26277|282|
|60|26277|281|
|61|26277|281|
|62|26277|281|
|63|26277|282|
|64|26277|281|
|65|26277|281|
|66|26277|282|
|67|26277|281|
|68|26277|281|
|69|26277|281|
|70|26277|282|
|71|26277|281|
|72|26277|281|
|73|26277|282|
|74|26277|281|
|75|26277|281|
|76|26277|281|
|77|26277|282|
|78|26277|281|
|79|26277|281|
|80|26277|281|
|81|26277|282|
|82|26277|281|
|83|26277|281|
|84|26277|282|
|85|26277|281|
|86|26277|281|
|87|26277|281|
|88|26277|282|
|89|26277|281|
|90|26277|281|
|91|26277|282|
|92|26277|281|
|93|26277|281|
|94|26277|281|
|95|26277|282|
|96|26277|281|
|97|26277|281|
|98|26277|282|
|99|26277|281|
|100|26277|281|
